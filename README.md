# 🌤️ 기상청 날씨 서비스 (Weather App)

공공데이터포털의 기상청 단기예보 API를 활용하여 실시간 날씨 정보를 제공하고, 원하는 지역을 즐겨찾기로 관리할 수 있는 React 기반 웹 서비스입니다.

### 🔗 서비스 링크

- **배포 URL**: [https://weather-app-gamma-three-78.vercel.app](https://weather-app-gamma-three-78.vercel.app)
- **GitHub Repository**: [https://github.com/seokachu/weather-app](https://github.com/seokachu/weather-app)

---

### 주요 기능

- **실시간 날씨 정보**: 기상청 API를 기반으로 현재 온도, 최저/최고 기온 제공
- **지역 검색**: 전국 단위 지역명 검색을 통한 날씨 조회
- **즐겨찾기 관리**:
  - 관심 지역 등록 및 해제 기능 (최대 6개)
  - 즐겨찾기 지역별 맞춤형 **닉네임 수정 기능**
- **직관적인 UX**:
  - `Lucide React` 아이콘을 활용한 세련된 UI
  - `react-hot-toast`를 통한 실시간 액션 피드백 (추가/삭제/수정 알림)

---

### 🛠️ 사용 기술 스택

- **Framework**: React (Vite)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Data Fetching**: React Query (TanStack Query)
- **Icons**: Lucide React
- **Toast**: react-hot-toast
- **Routing**: React Router DOM
- **Deployment**: Vercel

---

### 🚀 프로젝트 실행 방법

```bash
# 레포지토리 클론
git clone https://github.com/seokachu/weather-app
cd weather-app

# 의존성 설치
npm install

# 로컬 서버 실행
npm run dev
```

---

### 🔑 환경 변수 설정 (Environment Variables)

이 프로젝트는 공공데이터포털의 기상청 API를 사용하며, 로컬 실행을 위해 루트 폴더에 `.env` 파일을 생성하고 아래 환경변수를 설정해야 합니다.

```env
# 기상청 API 서비스 키 (공공데이터포털에서 발급받은 키를 입력하세요)
VITE_WEATHER_SERVICE_KEY=your_service_key_here

# 기상청 단기예보 API 베이스 URL
VITE_WEATHER_API_BASE_URL=https://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst
```

---

### 구현 기능 설명

#### 1. 내 위치 기반 실시간 날씨

- **날씨 데이터 시각화**: 기상청 API 응답 데이터를 가공하여 현재 기온, 최저/최고 기온을 사용자 친화적인 UI로 제공합니다.

#### 2. 지역 검색 및 기상청 좌표 변환

- **동네 이름 검색**: 전국 법정동(공식 명칭) 데이터를 활용하여 사용자가 원하는 지역을 자유롭게 검색할 수 있습니다.
- **격자 좌표(nx, ny) 매핑**: 검색된 주소명을 기상청 API 전용 격자 좌표로 변환하여 실시간 단기 예보 데이터를 호출합니다.

#### 3. 즐겨찾기 관리 및 닉네임 수정

- **관심 지역 등록**: 아이콘(Star) 클릭 시 `LocalStorage`에 저장되어 브라우저 재접속 시에도 데이터가 유지됩니다.
- **닉네임 수정**: 즐겨찾기 목록에서 이름을 수정할 수 있는 편집 기능을 구현하여 사용자 편의성을 강화했습니다.

#### 4. 예외 상황 처리 및 UX 개선

- **위치 권한 대응**: 위치 권한 거부 시, 에러 화면 대신 전용 안내 배너와 검색 유도 UI(`EmptyWeatherView`)를 노출하여 사용자의 혼란을 방지했습니다.
- **데이터 부재 대응**: 검색 결과가 없거나 API 응답 에러 발생 시 **"해당 장소의 정보가 제공되지 않습니다."**라는 명확한 가이드를 제공합니다.

---

### 기술적 의사결정 및 이유

#### 1. 기상청 단기예보 API(공공데이터포털) 선택

- **배경**: 날씨 데이터를 제공하는 다양한 API가 있으나, 대한민국 행정구역 JSON을 활용한 국내 지역 검색 기능을 구현함에 있어 가장 데이터 정확도가 높고 상세한 정보를 제공하는 기상청 API를 선택했습니다.
- **비교를 통한 의사결정**:
  - **vsOpenWeatherMap**: OpenWeatherMap은 글로벌 서비스로 범용성이 좋지만, 국내 특정 동네(읍/면/동) 단위의 상세한 기상 정보를 얻기에는 국산 데이터인 기상청 API가 더 정밀하다고 판단했습니다.
  - **격자 좌표(nx, ny) 변환**: 단순히 위경도를 넘기는 OpenWeatherMap API와 달리, 기상청 API는 고유의 격자 좌표 변환이 필요합니다. 이 과정이 기술적으로 난이도가 높다고 생각했고,<br>
    제공된 행정구역 데이터를 잘 가공해서 활용해보고자 기상청 API를 채택했습니다.
- **확장성 고려**: 현재는 기온 정보 중심의 서비스를 구현했으나, 기상청 API는 강수 형태, 습도 등 국내 기상 특성에 특화된 상세 데이터를 제공합니다. 추후 서비스 확장 시 이러한 세부 데이터를 활용해 더욱 고도화된 날씨 정보를 제공하기에 최적의 선택지라고 생각했습니다.

#### 2. React Query (TanStack Query) 도입

- **이유**: 기상청 API 데이터는 호출 횟수 제한이 있으며, 데이터 업데이트 주기가 일정하여 한 번 받아온 정보가 단시간 내에 변하지 않는 특성이 있습니다. 기존의 `fetch` 방식은 컴포넌트 마운트될 때, 혹은 페이지 이동 시 동일 데이터를 반복 요청하여 불필요한 트래픽을 유발했습니다. 이를 해결하고자 상태 관리 라이브러리인 TanStack Query를 도입했습니다.

- **핵심 구현 내용**:

  - **캐싱 전략 설정**: 기상청 데이터 업데이트 주기를 고려하여 `staleTime`을 **30분**으로 설정했습니다. 짧은 시간 내 재방문 시 API 호출 없이 캐시된 데이터를 즉시 보여주어 앱의 반응 속도와 UX를 크게 개선했습니다.
  - **효율적인 리소스 관리**: 사용되지 않는 데이터가 메모리를 점유하지 않도록 `gcTime`을 **1시간**으로 설정하여 메모리 효율을 높였습니다.
  - **커스텀 훅을 통한 로직 추상화**: `useWeather` 훅으로 데이터 페칭 로직을 분리하여 UI 컴포넌트와의 의존성을 낮추고 가독성을 확보했습니다.

- **구현 예시**:

```tsx
export const useWeather = (coords?: { nx: number; ny: number }) => {
  return useQuery({
    queryKey: WEATHER_KEYS.weather(coords),
    queryFn: () => getVilageFcst(coords),

    // 30분 동안 데이터가 fresh 상태로 유지되어 중복 요청 방지
    staleTime: 30 * 60 * 1000,
    // 사용하지 않는 데이터는 1시간 뒤 가비지 컬렉션(GC) 대상이 됨
    gcTime: 60 * 60 * 1000,
    // API 실패 시 1회만 재시도하여 불필요한 사용자 대기 시간 방지
    retry: 1,
  });
};
```

#### 3. Lucide React 아이콘 라이브러리

- **이유**: 아이콘이 필요할 때마다 매번 SVG 파일을 다운로드해서 프로젝트 폴더에 저장하고, 복잡한 SVG 코드를 직접 관리하는 방식은 비효율적이라고 판단했습니다. 특히 아이콘의 색상이나 크기를 바꾸고 싶을 때마다 파일을 수정하거나 코드를 다시 짜야 하는 번거로움을 줄이기 위해 코드 한 줄로 간편하게 조작할 수 있는 Lucide React를 선택했습니다.

- **핵심 의사결정**:
  - **손쉬운 사용**: 아이콘을 하나의 파일처럼 다루는 것이 아니라, `ChevronLeft`처럼 이름만 부르면 바로 쓸 수 있는 컴포넌트 방식이라 개발 속도가 빨라집니다.
  - **자유로운 커스텀**: Tailwind CSS 클래스를 그대로 사용할 수 있어, 클릭 한 번으로 아이콘 색을 바꾸거나 마우스를 올렸을 때 움직이게 하는 등의 스타일 수정을 매우 쉽게 구현했습니다.
  - **깔끔한 코드**: 복잡한 SVG 태그 대신 짧은 컴포넌트 이름을 사용하므로, 전체적인 코드 가독성이 좋아져 유지보수가 수월해졌습니다.

#### 4. React-hot-toast를 통한 UX 개선

- **이유**: 즐겨찾기 추가나 닉네임 수정 같은 사용자 액션이 일어났을 때, 브라우저 기본 `alert`는 화면 흐름을 완전히 멈추고 확인 버튼을 눌러야 하는 불편함이 있습니다. <br>
  이를 대체하기 위해 여러 라이브러리를 검토한 결과, 프로젝트의 규모와 가벼운 실행 환경을 고려하여 React-hot-toast를 최종 선택했습니다.

- **비교를 통한 의사결정**:

  - **vs React-Toastify**: 가장 대중적이지만 설정 코드가 길고 번들 사이즈가 큽니다. 반면 **hot-toast**는 매우 가볍고(~5kb) 별도의 CSS 임포트 없이도 세련된 디자인을 제공하여 초기 로딩 성능과 개발 속도를 모두 잡을 수 있었습니다.<br>
  - **vs 직접 구현 (Custom Toast)**: 토스트의 위치 제어, 애니메이션, 중복 알림 방지 로직을 직접 구현하는 것은 개발 효율이 낮다고 판단했습니다. <br>
    안정성이 검증된 라이브러리를 사용하되, 가장 React스러운 선언적인 방식으로 동작하는 도구를 선택하여 코드 양을 최소화 했습니다.
  - **유지보수성**: `messages.ts` 상수 관리 파일과 결합하여, 한 줄의 코드로 앱 전체에 일관된 안내 메시지를 즉각적으로 전달할 수 있도록 설계했습니다.

- **구현 예시**:

```tsx
import { toast } from 'react-hot-toast';
import { TOAST_MESSAGES } from '@/shared/constants/messages';

// 복잡한 설정 없이 직관적인 API로 피드백 제공
toast.success(TOAST_MESSAGES.FAVORITE_ADD);
```
